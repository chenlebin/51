C51 COMPILER V9.00   EXAMPLE8_1                                                            06/22/2021 23:44:02 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE EXAMPLE8_1
OBJECT MODULE PLACED IN example8_1.OBJ
COMPILER INVOKED BY: E:\C51\BIN\C51.EXE example8_1.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*
   2          Àý4£ºPC»úÍ¨ÐÅÏòµ¥Æ¬»ú·¢ËÍÒ»×é16½øÖÆÊý£¬µãÁÁLEDÐ¡µÆ£»
   3          ½ÓÊÕµ½Êý¾Ýºó£¬ÏòPC¶Ë·¢ËÍ¡°I get ¡± ¡£
   4          */
   5          #include <reg52.h>
   6          unsigned char code seg7[]={0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,
   7                                      0x80,0x90,0x88,0x83,0xc6,0xa1,0x86,0x8e};//¹²Ñô
   8          unsigned char  table[]="i get" ;
   9          
  10          unsigned  int i,j,k,flag;
  11          unsigned  int a;//´æ·Å½ÓÊÕÊý¾Ý
  12          
  13          void delay10ms(k)                                //ÓÐ²ÎÑÓÊ±º¯Êý
  14          {
  15   1              for(i=0;i<k;i++)                        //10ms*k
  16   1                  {
  17   2                        for(j=0;j<1000;j++);          //Ã¿ÌõforÓï¾ä´óÔ¼ÓÃÊ±10us
  18   2                                              //1000*10=10ms
  19   2                  }
  20   1      }
  21          void init()
  22          {
  23   1         TMOD=0X20;                 //GATE=0,ct!=0,M1=1,M0=0:¶¨Ê±Æ÷1,¹¤×÷·½Ê½2,8Î»×Ô¶¯ÖØ×°ÔØ
  24   1         TL1=0XFa;                  //³õÖµÎª250£¬²¨ÌØÂÊÎª£º4800
  25   1         TH1=0XFa;                  //³õÖµÎª250£¬²¨ÌØÂÊÎª£º4800
  26   1         TR1=1;                     //Æô¶¯¶¨Ê±Æ÷T1
  27   1         SM0=0;                     //Éè¶¨´®¿Ú¹¤×÷·½Ê½
  28   1         SM1=1;                     //·½Ê½1£¬SM0=0£¬SM1=1
  29   1         REN=1;                     //×¼Ðí´®¿Ú½ÓÊÕ
  30   1         EA=1;                      //¿ª×ÜÖÐ¶Ï
  31   1         ES=1;                      //¿ª´®¿ÚÖÐ¶Ï
  32   1      
  33   1      }
  34          
  35          main()
  36          {
  37   1        init();    //µ÷ÓÃ³õÊ¼»¯
  38   1        while(1)
  39   1        {
  40   2           if(flag==1)        //·¢ËÍÊý¾ÝÌõ¼þ£¬¿ª¹ØÔÚ´®¿ÚÖÐ¶Ïº¯ÊýÖÐ£¬µ±½ÓÊÕÍêPC¶ËÐÅÏ¢ºó×Ô¶¯´¥·¢
  41   2           {
  42   3             ES=0;              //¹Ø±Õ´®¿ÚÖÐ¶Ï£¬ÏÈ½«ÐèÒª·¢ËÍ¸øPC¶ËµÄÊý¾Ý£¨I get£©£¬°´Î»·¢ËÍ¸øPC¶ËÖ±µ½È«²¿·¢ËÍÍê±
             -Ï
  43   3             for(i=0;i<5;i++)
  44   3             {
  45   4              SBUF=table[i];//´æÒ»Ìõ·¢Ò»Ìõ£¬Ö±µ½·¢ÍêÎªÖ¹
  46   4              while(!TI) ;
  47   4              TI=0;              //Èí¼þÇå0£¬È»ºóÑ­»·ÏÂÒ»´Î×Ö·û
  48   4             }
  49   3             SBUF=a;          //½«½ÓÊÕµ½µÄ16½øÖÆÊý£¨0X£¿£¿£©ÔÙ´Î·¢ËÍ¸øPC¶ËÈ·ÈÏµ¥Æ¬»úÕæµÄ½ÓÊÕµ½ÁËÕâ¸öÊý¾Ý
  50   3                 while(!TI);
  51   3                 TI=0;   
  52   3             /*
  53   3              ÒÔÉÏÎª·½Ê½1·¢ËÍÊý¾Ý´óÖÂÁ÷³Ì 
  54   3             */                     
C51 COMPILER V9.00   EXAMPLE8_1                                                            06/22/2021 23:44:02 PAGE 2   

  55   3            
  56   3             ES=1; //¿ªÆô´®¿ÚÖÐ¶ÏµÈ´ýÏÂÒ»´ÎµÄPC¶ËÊý¾Ý·¢ËÍ£¨Ò²¾ÍÊÇµ¥Æ¬»úµÈ´ý½ÓÊÕ£©
  57   3             flag=0;//½«flagµ¥Æ¬»ú·¢ËÍÊý¾ÝµÄ¿ª¹Ø¹Ø±Õ£¬Ö±µ½ÏÂÒ»´Î½ÓÊÕµ½PC¶ËÐÅÏ¢£¬
  58   3                        //½øÈë´®¿ÚÖÐ¶Ïº¯Êýºó×îºóÒ»ÐÐflag=1¿ªÆômainº¯Êý·¢ËÍÊý¾ÝÎªÖ¹£¡£¡ 
  59   3           
  60   3           }                                           
  61   2        }
  62   1      
  63   1      }
  64          void ser() interrupt 4    //µ±½ÓÊÕµ½PC·¢ËÍµÄÊý¾ÝÊ±£¬×Ô¶¯½øÈëÖÐ¶Ï³ÌÐò
  65          {
  66   1       
  67   1        
  68   1        a=SBUF;//½«½ÓÊÕµ½µÄÊý¾Ý´æµ½aÖÐ
  69   1        P2=a;    //ÈÃaÖÐ´æ´¢µÄ16½øÖÆÊýÒÔÐ¡µÆµÄÐÎÊ½ÏÔÊ¾³öÀ´
  70   1        flag=1;  //flagÊÇmainº¯ÊýÖÐ£¬µ¥Æ¬»ú·¢ËÍÊý¾ÝµÄÌõ¼þ
  71   1        RI=0;    //½«R1Çå0µÈ´ýÏÂÒ»´Î½ÓÊÕÊý¾Ý
  72   1        
  73   1      
  74   1      
  75   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    159    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
